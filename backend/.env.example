# Proxmox Manager Portal - Backend Environment Configuration
# Copy this file to .env and configure for your environment

# ============================================================================
# Application Configuration
# ============================================================================

# Application environment: development | staging | production
NODE_ENV=development

# Server port
PORT=3002

# CORS allowed origins (comma-separated)
# Development: http://localhost:8081
# Production: https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:8081

# ============================================================================
# Database Configuration
# ============================================================================

# Database provider: sqlite | postgresql
DATABASE_PROVIDER=sqlite

# Database URL
# SQLite (development): file:./dev.db
# PostgreSQL (production): postgresql://user:password@host:5432/database?schema=public
DATABASE_URL=file:./dev.db

# ============================================================================
# Authentication & Security
# ============================================================================

# JWT Secret Keys (MUST be changed in production!)
# Generate with: openssl rand -base64 32
JWT_SECRET=change-this-secret-in-production-use-openssl-rand-base64-32
JWT_REFRESH_SECRET=change-this-refresh-secret-in-production-use-openssl-rand-base64-32

# JWT Token Expiry
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# Password hashing rounds (10-12 recommended)
BCRYPT_ROUNDS=12

# ============================================================================
# CSRF Protection
# ============================================================================

# CSRF token length (bytes)
CSRF_TOKEN_LENGTH=32

# CSRF token expiry (milliseconds)
CSRF_TOKEN_EXPIRY=3600000

# ============================================================================
# Rate Limiting
# ============================================================================

# Rate limit window (milliseconds)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Login rate limit (requests per 15 minutes)
LOGIN_RATE_LIMIT=5

# Account lockout duration (milliseconds)
ACCOUNT_LOCKOUT_DURATION=1800000

# ============================================================================
# Session Configuration
# ============================================================================

# Session expiry (milliseconds)
SESSION_EXPIRY=3600000

# Cleanup interval for expired sessions (milliseconds)
SESSION_CLEANUP_INTERVAL=600000

# ============================================================================
# Redis Configuration (Optional - for distributed systems)
# ============================================================================

# Redis URL (optional - for token storage and rate limiting in production)
# REDIS_URL=redis://localhost:6379

# Redis password (optional)
# REDIS_PASSWORD=

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level: error | warn | info | http | verbose | debug | silly
LOG_LEVEL=info

# Log file path (optional - console only if not set)
LOG_FILE_PATH=./logs

# Maximum log file size (bytes)
LOG_MAX_SIZE=10485760

# Maximum log files to keep
LOG_MAX_FILES=30

# ============================================================================
# Proxmox Configuration
# ============================================================================

# Default Proxmox port
PROXMOX_DEFAULT_PORT=8006

# Proxmox API timeout (milliseconds)
PROXMOX_TIMEOUT=30000

# Allow insecure HTTPS connections (self-signed certificates)
# WARNING: Only use in development/testing
PROXMOX_ALLOW_INSECURE=false

# ============================================================================
# Email Configuration (Future use)
# ============================================================================

# SMTP configuration for email notifications
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_SECURE=true
# SMTP_USER=user@example.com
# SMTP_PASSWORD=password
# SMTP_FROM=noreply@example.com

# ============================================================================
# Monitoring & Observability
# ============================================================================

# Enable metrics collection
ENABLE_METRICS=false

# Metrics port
METRICS_PORT=9090

# Sentry DSN (error tracking)
# SENTRY_DSN=

# ============================================================================
# Feature Flags
# ============================================================================

# Enable 2FA/MFA
ENABLE_2FA=false

# Enable email notifications
ENABLE_EMAIL=false

# Enable webhooks
ENABLE_WEBHOOKS=false

# Enable API documentation (Swagger)
ENABLE_API_DOCS=true

# ============================================================================
# Development & Debug
# ============================================================================

# Enable debug logging
DEBUG=false

# Pretty print JSON logs (disable in production for performance)
LOG_PRETTY_PRINT=true

# Enable SQL query logging
LOG_SQL_QUERIES=false
